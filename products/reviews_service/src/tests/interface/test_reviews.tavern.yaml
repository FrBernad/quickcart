---
test_name: Reviews interface test

includes:
  - !include tavern_reviews_variables.yaml

marks:
  - usefixtures:
      - test_client
      - test_database

stages:
  - name: Get reviews by product
    request:
      url: "{reviews_base_url:s}?product_id={product_id:d}"
      method: GET
    response:
      status_code: 200
  - name: Get reviews by product withoud product_id
    request:
      url: "{reviews_base_url:s}?product_id="
      method: GET
    response:
      status_code: 400
  - name: Create review
    request:
      url: "{reviews_base_url:s}/{product_id:d}"
      method: POST
      json:
        description: "test"
        user_id: 1
        score: 4
    response:
      status_code: 201